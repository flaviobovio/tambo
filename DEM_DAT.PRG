PROCEDURE DEM_DAT (TD,LINEA)
PRIVATE COL:=SETCOLOR()
SET CURSOR ON
DO CASE
CASE TD = 1
   FNA = CTOD('')
   PAD = SPACE(4)
   MAD = SPACE(8)
   WRC = SPACE(7)
   @ LINEA,23 GET FNA
   @ LINEA,34 GET PAD PICTURE'@! XXXX' VALID PAD=SPACE(4) .OR. EXI_TOR(PAD,.T.)
   @ LINEA,41 GET MAD PICTURE'@! XXXXXXXX'
   @ LINEA,52 GET WRC PICTURE'@! XXXXXXX'
   READ
CASE TD = 2
   gua = space(8)
   SEX = SPACE(8)
   NPA = NROPAR + 1
   @ LINEA,23 GET FPA VALID FEC_PAR (FPA)
   READ
   @ linea,32 prompt 'M' message 'MACHO'
   @ linea,34 prompt 'H' message 'HEMBRA'
   menu to s_te
   @linea,32 say iif( s_te=1,'M','H' ) + ":"
   if s_te = 1
      @ LINEA,34 GET gua PICTURE '@!' VALID  !EXI_TER(gua)
      sex = 'M'
      READ
      SELECT TAMBO
   else
      @ LINEA,34 GET SEX PICTURE'@!' VALID  NOEXISTE(SEX)
      READ
   endif
   PANT=SAVESCREEN(LINEA,45,LINEA+2,61)
   @  LINEA,45 CLEAR TO  LINEA+2,61
   @  LINEA,45 TO LINEA+2,61
   @  LINEA+1,47 PROMPT 'S' MESSAGE 'PARTO SIN AYUDA'
   @  LINEA+1,50 PROMPT 'C' MESSAGE 'PARTO CON AYUDA'
   @  LINEA+1,53 PROMPT 'A' MESSAGE 'ABORTO'
   @  LINEA+1,56 PROMPT 'M' MESSAGE 'MUERTO'
   @  LINEA+1,59 PROMPT 'U' MESSAGE 'MUERTO CON AYUDA'
   MENU TO T
   DO CASE
      CASE T = 1
         TPA = 'S'
      CASE T = 2
         TPA = 'C'
      CASE T = 3
         TPA = 'A'
      CASE T = 4
         TPA = 'M'
      CASE T = 5
         TPA = 'U'
   ENDCASE
   RESTSCREEN(LINEA,45,LINEA+2,61,PANT)
   SETCOLOR(INVER)
   @  LINEA ,45 SAY TPA
   @  LINEA ,60 SAY NPA PICTURE '99'
   @  LINEA ,55 SAY DIALAC PICTURE'999'
   @  LINEA ,61 SAY ANTSEC PICTURE'999'
   @  LINEA ,67 SAY ULTPRO PICTURE'999'
   @  LINEA ,72 SAY ACUPRO PICTURE'99999'
   SETCOLOR(COMUN)
CASE TD = 3
   IF RESULT = 'P'
      SET CURSOR OFF
      SETCOLOR(INVER)
      @24,11 SAY ' ESA VACA ESTA PRE¥ADA. CUALQUIER TECLA PARA CONTINUAR... '
      SETCOLOR(COMUN)
      TONE(136,4)
      INKEY(0)
      MENU()
   ENDIF
   NSE = NROSER + 1
   @ LINEA,23 GET FSE VALID FEC_PAR (FSE)
   @ LINEA,34 GET TOR PICTURE'@! XXXX' VALID EXI_TOR(TOR,.T.)
   @ LINEA,40 GET INS PICTURE'@! XXXX' VALID EXI_INS(INS,.T.)
   SETCOLOR(INVER)
   @ LINEA,46 SAY NSE PICTURE '99'
   SETCOLOR(COMUN)
   READ
CASE TD = 4
   @  LINEA,23 GET FTA VALID FEC_PAR (FTA)
   READ
   PANT=SAVESCREEN( LINEA,34, LINEA+2,53)
   @  LINEA,34 CLEAR TO  LINEA+2,53
   @  LINEA,34 TO  LINEA+2,53
   @  LINEA+1,36 PROMPT 'P' MESSAGE 'PRE¥ADA'
   @  LINEA+1,39 PROMPT 'V' MESSAGE 'VACIA'
   @  LINEA+1,42 PROMPT 'N' MESSAGE 'VACIA NORMAL'
   @  LINEA+1,45 PROMPT 'A' MESSAGE 'VACIA ANESTRO'
   @  LINEA+1,48 PROMPT 'R' MESSAGE 'PRESTADO REEXAMEN'
   @  LINEA+1,51 PROMPT 'S' MESSAGE 'SUCIA REEXAMEN'
   MENU TO R
   DO CASE
   CASE r = 1
      RES = 'P'
   CASE r = 2
      RES = 'V'
   CASE r = 3
      RES = 'N'
   CASE r = 4
      RES = 'A'
   CASE r = 5
      RES = 'R'
   CASE r = 6
      RES = 'S'
   ENDCASE

   RESTSCREEN( LINEA,34, LINEA+2,53,PANT)
   @24, 0 CLEAR
   SETCOLOR(INVER)
   @  LINEA,34 SAY RES
   SETCOLOR(COMUN)
CASE TD = 5
   @  LINEA,23 GET FIN VALID FEC_PAR (FIN)
   READ
   SETCOLOR(INVER)
   @  LINEA ,51 SAY DIASEC PICTURE'999'
   @  LINEA ,57 SAY ANTLAC PICTURE'999'
   SETCOLOR(COMUN)
CASE TD = 6
   DAC=0
   DPA=0
   IF MARENF
      SELECT ENFERM
      SEEK COD
      DAC=FECHA
      DO WHILE CODVAC = COD
         DPA=FECHA
         SKIP
      ENDDO
      SELECT TAMBO
   ENDIF
   @ LINEA,23 GET FEN VALID FEC_PAR (FEN)
   READ
   IF MARENF
      DAC=FEN-DAC
      DPA=FEN-DPA
   ENDIF
   SETCOLOR(INVER)
   @ LINEA  ,34 SAY DPA PICTURE'999'
   @ LINEA  ,38 SAY DAC PICTURE'999'
   SETCOLOR(COMUN)
   SELECT MOTIVO
   GO TOP
   PRIVATE AR1[ LASTREC() ], Y := 1 , MO
   DO WHILE !EOF()
      AR1[Y] = CONMOT
      SKIP
      Y=Y+1
   ENDDO
   X=0
   A=1
   DO WHILE A<3
      IF A=1 .OR. MOT[A-1]#SPACE(4)
         PANT = SAVESCREEN(LINEA-6,X+51,LINEA,X+72)
         @ LINEA-6,X+51 TO LINEA,X+72 DOUBLE
         MO = ACHOICE (LINEA-5,X+52,LINEA-1,X+71, AR1,"ACH_FUN" )
         GO MO
         MOT[A]=CODMOT
         RESTSCREEN(LINEA-6,X+51,LINEA,X+72,PANT)
      ELSE
         MOT[A]=SPACE(4)
      ENDIF
      SETCOLOR(INVER)
      @ LINEA  ,X+45 SAY MOT [A]
      SETCOLOR(COMUN)
      X=X+5
      A=A+1
   ENDDO
   SELECT TRATAM
   PRIVATE AR2[ LASTREC() ] , TR
   Y = 1
   GO TOP
   DO WHILE !EOF()
      AR2[Y] = CONTRA
      SKIP
      Y=Y+1
   ENDDO
   X=0
   B=1
   DO WHILE B<5
      IF B=1 .OR. TRA[B-1]#SPACE(2)
         PANT = SAVESCREEN(LINEA-6,55,LINEA,78)
         @ LINEA-6,57 TO LINEA,78 DOUBLE
         TR = ACHOICE (LINEA-5,58,LINEA-1,77,AR2,"ACH_FUN" )
         GO TR
         TRA[B]=CODTRA
         RESTSCREEN(LINEA-6,55,LINEA,78,PANT)
      ELSE
         TRA[B]=SPACE(2)
      ENDIF
      SETCOLOR(INVER)
      @ LINEA,X+58 SAY TRA[B]
      SETCOLOR(COMUN)
      B=B+1
      X=X+3
   ENDDO
   SELECT TAMBO
   IF MOT[1]=SPACE(4) .AND. TRA[1]=SPACE(2)
      PRIVATE AR3 := {'RODEO','VENTA','MUERTA','R.F.L.'}
      PANT = SAVESCREEN(LINEA-5,71,LINEA,78)
      @ LINEA-5,71 TO LINEA,78 DOUBLE
      DE = ACHOICE (LINEA-4,72,LINEA-1,77,AR3,"ACH_FUN" )
      RESTSCREEN(LINEA-5,71,LINEA,78,PANT)
      DO CASE
      CASE DE = 1
         DES = 'R'
      CASE DE = 2
         DES = 'V'
      CASE DE = 3
         DES = 'M'
      CASE DE = 4
         DES = 'F'
      ENDCASE
      SETCOLOR(INVER)
      @ LINEA  ,74 SAY DES
      SETCOLOR(COMUN)
   ENDIF
CASE TD = 7
   SETCOLOR(INVER)
   @  4,48 SAY RFL
   SETCOLOR(COMUN)
   SELECT MOTIVO
   GO TOP
   PRIVATE AR1[ LASTREC() ], ARS[ LASTREC() ] , Y := 1
   DO WHILE !EOF()
      AR1[Y] = CONMOT
      IF Y#1
         ARS[1]=.T.
      ELSE
         ARS[Y]=.F.
      ENDIF
      SKIP
      Y=Y+1
   ENDDO
   PANT = SAVESCREEN(LINEA,53,LINEA+6,77)
   @ LINEA,55 TO LINEA+6,77 DOUBLE
   MO = ACHOICE (LINEA+1,56,LINEA+5,75, AR1, ARS,"ACH_FUN" )
   GO MO
   CFL=CODMOT
   RESTSCREEN(LINEA,53,LINEA+6,77,PANT)
   SETCOLOR(INVER)
   @ LINEA  ,53 SAY CFL
   SETCOLOR(COMUN)
   SELECT TAMBO
ENDCASE
SETCOLOR(COL)
SET CURSOR OFF
